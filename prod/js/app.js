"use strict";function _toConsumableArray(n){if(Array.isArray(n)){for(var t=0,e=Array(n.length);t<n.length;t++)e[t]=n[t];return e}return Array.from(n)}var _slicedToArray=function(){function n(n,t){var e=[],r=!0,i=!1,o=void 0;try{for(var u,a=n[Symbol.iterator]();!(r=(u=a.next()).done)&&(e.push(u.value),!t||e.length!==t);r=!0);}catch(n){i=!0,o=n}finally{try{!r&&a.return&&a.return()}finally{if(i)throw o}}return e}return function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return n(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();window.onload=function(){function n(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return new Promise(function(r,i){var o=t.collection,u=t.next_href,a=[].concat(_toConsumableArray(e),_toConsumableArray(o));u?fetch(u).then(function(n){return n.json()}).then(function(t){return r(n(t,a))}):r(a)})}function t(t,e){var o=new Promise(function(n,r){fetch("https://api.soundcloud.com/users/"+e+"?client_id="+t).then(function(n){return n.json()}).then(function(t){return n(t.id)})}),u=new Promise(function(e,r){o.then(function(n){return fetch("https://api.soundcloud.com/users/"+n+"/followings?client_id="+t+"&page_size=200&linked_partitioning=1")}).then(function(n){return n.json()}).then(function(t){return e(n(t))})}),a=new Promise(function(e,r){o.then(function(n){return fetch("https://api.soundcloud.com/users/"+n+"/favorites?client_id="+t+"&page_size=200&linked_partitioning=1")}).then(function(n){return n.json()}).then(function(t){return e(n(t))})});Promise.all([u,a]).then(function(n){var t=_slicedToArray(n,2),e=t[0],o=t[1],u=r(e),a=i(o),f="username, description, first_name, last_name, website_title, website, permalink\n"+s(u),m="username, title, created_at, description,  bpm, duration (ms), liked_count, kind, play_count, purchase_title, purchase_url, tag_list, permalink\n"+s(a),d=new File([f],"following.csv",{type:"text.csv"}),p=new File([m],"likes.csv",{type:"text.csv"});c.href=URL.createObjectURL(p),l.href=URL.createObjectURL(d)})}function e(n){return"string"==typeof n?n.replace(/[\n\r,]/g,". "):"number"==typeof n?n.toString():n}function r(n){return n.map(function(n){var t=n.description;return[n.username,t,n.first_name,n.last_name,n.website_title,n.website,n.permalink]})}function i(n){return n.map(function(n){var t=n.bpm,e=n.created_at,r=n.description,i=n.duration,o=n.favoritings_count,u=n.kind,a=n.playback_count,c=n.purchase_title,l=n.purchase_url,s=n.permalink,f=n.tag_list,m=n.title;return[n.user.username,m,e,r,t,i,o,u,a,c,l,f,s]})}var o=document.querySelector("form"),u=document.querySelector(".Form_Input--clientId"),a=document.querySelector(".Form_Input--username"),c=document.querySelector(".Download--likes"),l=document.querySelector(".Download--following");o.addEventListener("submit",function(n){n.preventDefault(),t(u.value,a.value)});var s=function(n){return n.map(function(n){return n.map(function(n){return e(n)}).join(",")}).join("\n")}};